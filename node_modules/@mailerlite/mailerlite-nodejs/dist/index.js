"use strict";var G=Object.create;var A=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var F=(i,s)=>{for(var e in s)A(i,e,{get:s[e],enumerable:!0})},x=(i,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let a of $(s))!w.call(i,a)&&a!==e&&A(i,a,{get:()=>s[a],enumerable:!(r=L(s,a))||r.enumerable});return i};var y=(i,s,e)=>(e=i!=null?G(v(i)):{},x(s||!i||!i.__esModule?A(e,"default",{value:i,enumerable:!0}):e,i)),U=i=>x(A({},"__esModule",{value:!0}),i);var O={};F(O,{default:()=>S});module.exports=U(O);var j=y(require("axios"));function o(i){if(!i)throw new Error("ID must be provided");if(typeof i=="number")throw new Error("ID must be of type string")}var I=y(require("axios"));function t(i="",s,e){let{headers:r={},method:a,body:C=null,params:E={}}=s,R=T(E);return R=R?`?${R}`:"",(0,I.default)({method:a,url:e.basePath+i+R,headers:{...r,Authorization:`Bearer ${e.api_key}`,"X-Requested-With":"XMLHttpRequest","Content-type":"application/json","accept-encoding":"null"},data:C&&JSON.stringify(C)})}function T(i,s){return Object.keys(i).map(r=>{let a=i[r];return i.constructor===Array?r=`${s}[]`:i.constructor===Object&&(r=s?`${s}[${r}]`:r),typeof a=="object"?T(a,r):`${r}=${encodeURIComponent(a)}`}).flat(10).join("&")}var n=class{config;constructor(s){this.config=s}get(s){return t("/api/subscribers",{method:"GET",params:s},this.config)}createOrUpdate(s){return t("/api/subscribers",{method:"POST",body:s},this.config)}find(s){return o(s),t(`/api/subscribers/${s}`,{method:"GET"},this.config)}getCount(){return t("/api/subscribers",{method:"GET",params:{limit:0}},this.config)}delete(s){return o(s),t(`/api/subscribers/${s}`,{method:"DELETE"},this.config)}forget(s){return o(s),t(`/api/subscribers/${s}/forget`,{method:"POST"},this.config)}};var p=class{config;constructor(s){this.config=s}get(s){return t("/api/campaigns",{method:"GET",params:s},this.config)}find(s){return o(s),t(`/api/campaigns/${s}`,{method:"GET"},this.config)}create(s){return t("/api/campaigns",{method:"POST",body:s},this.config)}update(s,e){return o(s),t(`/api/campaigns/${s}`,{method:"PUT",body:e},this.config)}schedule(s,e){return o(s),t(`/api/campaigns/${s}/schedule`,{method:"POST",body:e},this.config)}cancel(s){return o(s),t(`/api/campaigns/${s}/cancel`,{method:"POST"},this.config)}delete(s){return o(s),t(`/api/campaigns/${s}`,{method:"DELETE"},this.config)}};var m=class{config;constructor(s){this.config=s}get(s,e){return t(`/api/forms/${s}`,{method:"GET",params:e},this.config)}update(s,e){return o(s),t(`/api/forms/${s}`,{method:"PUT",body:e},this.config)}delete(s){return o(s),t(`/api/forms/${s}`,{method:"DELETE"},this.config)}};var c=class{config;constructor(s){this.config=s}get(s){return t("/api/groups",{method:"GET",params:s},this.config)}create(s){return t("/api/groups",{method:"POST",body:s},this.config)}update(s,e){return o(s),t(`/api/groups/${s}`,{method:"PUT",body:e},this.config)}delete(s){return o(s),t(`/api/groups/${s}`,{method:"DELETE"},this.config)}getSubscribers(s,e){return o(s),t(`/api/groups/${s}/subscribers`,{method:"GET",params:e},this.config)}assignSubscriber(s,e){return o(s),o(e),t(`/api/subscribers/${s}/groups/${e}`,{method:"POST"},this.config)}unAssignSubscriber(s,e){return o(s),o(e),t(`/api/subscribers/${s}/groups/${e}`,{method:"DELETE"},this.config)}};var u=class{config;constructor(s){this.config=s}get(s){return t("/api/segments",{method:"GET",params:s},this.config)}getSubscribers(s,e){return o(s),t(`/api/segments/${s}/subscribers`,{method:"GET",params:e},this.config)}update(s,e){return o(s),t(`/api/segments/${s}`,{method:"PUT",body:e},this.config)}delete(s){return o(s),t(`/api/segments/${s}`,{method:"DELETE"},this.config)}};var f=class{config;constructor(s){this.config=s}get(s){return t("/api/fields",{method:"GET",params:s},this.config)}create(s){return t("/api/fields",{method:"POST",body:s},this.config)}update(s,e){return o(s),t(`/api/fields/${s}`,{method:"PUT",body:e},this.config)}delete(s){return o(s),t(`/api/fields/${s}`,{method:"DELETE"},this.config)}};var g=class{config;constructor(s){this.config=s}get(s){return t("/api/automations",{method:"GET",params:s},this.config)}find(s){return o(s),t(`/api/automations/${s}`,{method:"GET"},this.config)}getAutomationSubscribers(s,e){return o(s),t(`/api/automations/${s}/activity`,{method:"GET",params:e},this.config)}};var l=class{config;constructor(s){this.config=s}get(){return t("/api/timezones",{method:"GET"},this.config)}};var b=class{config;constructor(s){this.config=s}get(){return t("/api/campaigns/languages",{method:"GET"},this.config)}};var h=class{config;constructor(s){this.config=s}send(s){return t("/api/batch",{method:"POST",body:s},this.config)}};var d=class{config;constructor(s){this.config=s}get(){return t("/api/webhooks",{method:"GET"},this.config)}find(s){return o(s),t(`/api/webhooks/${s}`,{method:"GET"},this.config)}create(s){return t("/api/webhooks",{method:"POST",body:s},this.config)}update(s,e){return t(`/api/webhooks/${s}`,{method:"PUT",body:e},this.config)}delete(s){return o(s),t(`/api/webhooks/${s}`,{method:"DELETE"},this.config)}};var P=class{config;constructor(s){this.config=s}getSentCampaigns(s){return s.filter={status:"sent"},t("/api/campaigns",{method:"GET",params:s},this.config)}async getSentCampaignStats(s){o(s);let e=await t(`/api/campaigns/${s}`,{method:"GET"},this.config);if(e.data&&e.data.data&&e.data.data.stats)return e.data.data.stats;throw e.data&&e.data.data&&e.data.data.status!=="sent"?new Error("No stats available. See if ID of a sent campaign was provided."):new Error("No stats available. See if correct ID was provided.")}async getSentCampaignSubscribers(s,e){return o(s),t(`/api/campaigns/${s}/reports/subscriber-activity`,{method:"POST",body:e},this.config)}getFormsByType(s,e){return t(`/api/forms/${s}`,{method:"GET",params:e},this.config)}async getFormsCountByType(s){let e=await t(`/api/forms/${s}`,{method:"GET"},this.config);if(e.data&&e.data&&e.data.meta&&e.data.meta.aggregations)return e.data.meta.aggregations[s];throw new Error("No stats available.")}getFormSubscribers(s,e){return t(`/api/forms/${s}/subscribers`,{method:"GET",params:e},this.config)}getAutomations(s){return t("/api/automations",{method:"GET",params:s},this.config)}async getAutomationStats(s){o(s);let e=await t(`/api/automations/${s}`,{method:"GET"},this.config);if(e.data&&e.data.data&&e.data.data.stats)return e.data.data.stats;throw new Error("No stats available.")}getAutomationSubscribers(s,e){return o(s),t(`/api/automations/${s}/activity`,{method:"GET",params:e},this.config)}};var S=class{config;subscribers;campaigns;forms;groups;segments;fields;automations;timezones;languages;batches;webhooks;stats;constructor(s){this.config={api_key:s.api_key,basePath:s.base_path||"https://connect.mailerlite.com"},this.subscribers=new n(this.config),this.campaigns=new p(this.config),this.forms=new m(this.config),this.groups=new c(this.config),this.segments=new u(this.config),this.fields=new f(this.config),this.automations=new g(this.config),this.timezones=new l(this.config),this.languages=new b(this.config),this.batches=new h(this.config),this.webhooks=new d(this.config),this.stats=new P(this.config)}};0&&(module.exports={});
//# sourceMappingURL=index.js.map