{"version":3,"file":"kl-angular-mentions.js","sources":["ng://kl-angular-mentions/lib/mention-utils.ts","ng://kl-angular-mentions/lib/caret-coords.ts","ng://kl-angular-mentions/lib/mention-list.component.ts","ng://kl-angular-mentions/lib/mention.directive.ts","ng://kl-angular-mentions/lib/mention.module.ts","ng://kl-angular-mentions/public-api.ts","ng://kl-angular-mentions/kl-angular-mentions.ts"],"sourcesContent":["// DOM element manipulation functions...\r\n//\r\n\r\nfunction setValue(el: HTMLInputElement, value: any) {\r\n  if (isInputOrTextAreaElement(el)) {\r\n    el.value = value;\r\n  }\r\n  else {\r\n    el.textContent = value;\r\n  }\r\n}\r\n\r\nexport function getValue(el: HTMLInputElement) {\r\n  return isInputOrTextAreaElement(el) ? el.value : el.textContent;\r\n}\r\n\r\nexport function insertValue(\r\n  el: HTMLInputElement,\r\n  start: number,\r\n  end: number,\r\n  insertHTML: boolean,\r\n  text: any,\r\n  iframe: HTMLIFrameElement,\r\n  noRecursion: boolean = false\r\n  ) {\r\n    \r\n    if (isTextElement(el)) {\r\n      let val = getValue(el);\r\n      setValue(el, val.substring(0, start) + text + val.substring(end, val.length));\r\n      setCaretPosition(el, start + text.length, iframe);\r\n    }\r\n    else if (!noRecursion) {\r\n      let selObj: Selection = getWindowSelection(iframe);\r\n      //console.log(selObj);\r\n      if (selObj && selObj.rangeCount > 0) {\r\n        // var selRange = selObj.getRangeAt(0);\r\n        // var position = selRange.startOffset;\r\n        // var anchorNode = selObj.anchorNode;\r\n        // if (text.endsWith(' ')) {\r\n        //   text = text.substring(0, text.length-1) + '\\xA0';\r\n        // }\r\n        // insertValue(<HTMLInputElement>anchorNode, position - (end - start), position, text, iframe, true);\r\n        \r\n        if (insertHTML) {\r\n          insertElement(selObj, start, end, text, iframe);\r\n        }\r\n        else {\r\n          var selRange = selObj.getRangeAt(0);\r\n          var position = selRange.startOffset;\r\n          var anchorNode = selObj.anchorNode;\r\n          // if (text.endsWith(' ')) {\r\n          //   text = text.substring(0, text.length-1) + '\\xA0';\r\n          // }\r\n          \r\n          insertValue(<HTMLInputElement>anchorNode, position - (end - start), position, insertHTML, text, iframe, true);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  function makeAngularElements(el) {\r\n    if (!(el instanceof HTMLElement)) {\r\n      return;\r\n    }\r\n    el.setAttribute(\"_ngcontent-c0\", '');\r\n    for (let i in el.children) {\r\n      makeAngularElements(el.children[i])\r\n    }\r\n  }\r\n  \r\n  \r\n  function insertElement(\r\n    selObj: Selection,\r\n    start: number,\r\n    end: number,\r\n    text: HTMLElement,\r\n    iframe: HTMLIFrameElement\r\n    ) {\r\n      \r\n      //console.log(start, end);\r\n      \r\n      if (!(text instanceof HTMLElement)) {\r\n        var e = getDocument(iframe).createElement(\"span\");\r\n        e.innerHTML = text;\r\n        text = e;\r\n      }\r\n      \r\n      //make the element an angular element\r\n      makeAngularElements(text);\r\n      \r\n      \r\n      var anchorNode = selObj.anchorNode;\r\n      //var anchorNode = selObj.anchorNode.previousSibling;\r\n      //debugger;\r\n      \r\n      //console.log(selObj);\r\n      //console.log(anchorNode);\r\n      //console.log(anchorNode.nodeValue);\r\n      //Get the text that preceeded and followed what was typed as part of the autocomplete\r\n      var beforeString = '';\r\n      var afterString = '';\r\n      var isEnterKey = false;\r\n      \r\n      if(anchorNode.hasChildNodes() && anchorNode.firstChild.parentElement.innerHTML == '<br>')  {\r\n        isEnterKey = true;\r\n        \r\n        var contentHTML = anchorNode.parentElement.innerHTML;\r\n        //var qtyLineBreaks = contentHTML.substring(0, ) .split('')\r\n        var contentToReplace = anchorNode.parentElement.innerText.substring(start, end);\r\n        contentToReplace =  contentToReplace.replace('\\n','');\r\n\r\n        if(contentToReplace.indexOf('@') == -1){\r\n          contentToReplace = '@' + contentToReplace;\r\n        }\r\n        if(text.innerHTML.indexOf('@') == -1 ){\r\n          text.innerHTML = '&#64;' + text.innerHTML;\r\n        }\r\n        contentHTML = contentHTML.replace(contentToReplace, text.innerHTML);\r\n\r\n        anchorNode.parentElement.innerHTML = contentHTML;\r\n        \r\n      } else {\r\n        \r\n         if(anchorNode.nodeValue){\r\n          //console.log(anchorNode);\r\n          beforeString = anchorNode.nodeValue.substr(0, start);\r\n          afterString = anchorNode.nodeValue.substring(end);  \r\n        } else if(anchorNode.textContent){\r\n          beforeString = anchorNode.textContent.substr(0, start);\r\n          afterString = anchorNode.textContent.substring(end);  \r\n        } else {\r\n          beforeString = '';\r\n          afterString = text.innerText.substring(end);  \r\n        }\r\n        \r\n        //console.log(\"beforeString:\",beforeString);\r\n        //console.log(\"afterString:\",afterString);\r\n        \r\n        //removing previous typed search string\r\n        var positionChar = beforeString.lastIndexOf('@');\r\n        \r\n        //console.log(\" positionChar:\", positionChar);\r\n        \r\n        if(positionChar < 0) {\r\n          beforeString = beforeString + '@';\r\n          var positionChar = beforeString.lastIndexOf('@');\r\n          //console.log(\" beforeString 2:\", beforeString);\r\n        }\r\n        \r\n        \r\n        beforeString = beforeString.substring(0,  positionChar + 1);\r\n        //console.log(\"beforeString final:\",beforeString);\r\n        \r\n        //Remove the text\r\n        if(isEnterKey){\r\n          //console.log(anchorNode.parentElement.innerHTML);\r\n          anchorNode.parentElement.innerText = anchorNode.parentElement.innerText.replace('@jos','');\r\n          anchorNode.removeChild(anchorNode.firstChild); // .previousSibling.nodeValue = \"\";\r\n          //anchorNode.previousSibling.textContent = \"\";\r\n        } else {\r\n          anchorNode.nodeValue = \"\";\r\n          anchorNode.textContent = \"\";\r\n        }\r\n        \r\n        \r\n        //Create spans for the preceeding text & following text\r\n        let beforeEl = getDocument(iframe).createElement(\"span\");\r\n        beforeEl.innerText = beforeString;\r\n        let afterEl = getDocument(iframe).createElement(\"span\");\r\n        afterEl.innerText = afterString;\r\n        \r\n        //Insert the spans + the mention element\r\n        //debugger;\r\n        anchorNode.parentNode.insertBefore(afterEl, anchorNode.nextSibling);\r\n        anchorNode.parentNode.insertBefore(text, anchorNode.nextSibling);\r\n        anchorNode.parentNode.insertBefore(beforeEl, anchorNode.nextSibling);\r\n        \r\n        //Create a range located ater the mention\r\n        let range = getDocument(iframe).createRange();\r\n        range.selectNode(afterEl);\r\n        range.setStart(afterEl, 0);\r\n        range.setEnd(afterEl, 0);\r\n        \r\n        //Move the cursor to that spot\r\n        range.collapse(false);\r\n        selObj.removeAllRanges();\r\n        selObj.addRange(range);\r\n      }\r\n      //var htmlNode = beforeEl.innerHTML +  text.innerHTML + afterEl.innerHTML;\r\n      //anchorNode.parentElement.innerHTML =  htmlNode;\r\n      //anchorNode.parentNode.insertBefore(text, anchorNode.nextSibling);\r\n      //anchorNode.parentNode.insertBefore() .insertBefore(beforeEl, anchorNode.nextSibling);\r\n      //return;\r\n      \r\n      \r\n    }\r\n    \r\n    export function isInputOrTextAreaElement(el: HTMLElement): boolean {\r\n      return el != null && (el.nodeName == 'INPUT' || el.nodeName == 'TEXTAREA');\r\n    };\r\n    \r\n    export function isTextElement(el: HTMLElement): boolean {\r\n      return el != null && (el.nodeName == 'INPUT' || el.nodeName == 'TEXTAREA' || el.nodeName == '#text');\r\n    };\r\n    \r\n    export function setCaretPosition(el: HTMLInputElement, pos: number, iframe: HTMLIFrameElement = null) {\r\n      //console.log(\"setCaretPosition\", pos, el, iframe==null);\r\n      if (isInputOrTextAreaElement(el) && el.selectionStart) {\r\n        //el.focus();\r\n        el.setSelectionRange(pos, pos);\r\n      }\r\n      else {\r\n        let range = getDocument(iframe).createRange();\r\n        range.setStart(el, pos);\r\n        range.collapse(true);\r\n        let sel = getWindowSelection(iframe);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n      }\r\n    }\r\n    \r\n    export function getCaretPosition(el: HTMLInputElement, iframe: HTMLIFrameElement = null) {\r\n      //console.log(\"getCaretPosition\", el);\r\n      if (isInputOrTextAreaElement(el)) {\r\n        var val = el.value;\r\n        return val.slice(0, el.selectionStart).length;\r\n      }\r\n      else {\r\n        var selObj = getWindowSelection(iframe); //window.getSelection();\r\n        if (selObj.rangeCount > 0) {\r\n          var selRange = selObj.getRangeAt(0);\r\n          var preCaretRange = selRange.cloneRange();\r\n          preCaretRange.selectNodeContents(el);\r\n          preCaretRange.setEnd(selRange.endContainer, selRange.endOffset);\r\n          var position = preCaretRange.toString().length;\r\n          return position;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Based on ment.io functions...\r\n    //\r\n    \r\n    function getDocument(iframe: HTMLIFrameElement) {\r\n      if (!iframe) {\r\n        return document;\r\n      } else {\r\n        return iframe.contentWindow.document;\r\n      }\r\n    }\r\n    \r\n    function getWindowSelection(iframe: HTMLIFrameElement): Selection {\r\n      if (!iframe) {\r\n        //console.log(window.getSelection());\r\n        return window.getSelection();\r\n      } else {\r\n        return iframe.contentWindow.getSelection();\r\n      }\r\n    }\r\n    \r\n    export function getContentEditableCaretCoords(ctx: { iframe: HTMLIFrameElement, parent?: Element }) {\r\n      let markerTextChar = '\\ufeff';\r\n      let markerId = 'sel_' + new Date().getTime() + '_' + Math.random().toString().substr(2);\r\n      let doc = getDocument(ctx ? ctx.iframe : null);\r\n      let sel = getWindowSelection(ctx ? ctx.iframe : null);\r\n      let prevRange = sel.getRangeAt(0);\r\n      \r\n      // create new range and set postion using prevRange\r\n      let range = doc.createRange();\r\n      range.setStart(sel.anchorNode, prevRange.startOffset);\r\n      range.setEnd(sel.anchorNode, prevRange.startOffset);\r\n      range.collapse(false);\r\n      \r\n      // Create the marker element containing a single invisible character\r\n      // using DOM methods and insert it at the position in the range\r\n      let markerEl = doc.createElement('span');\r\n      markerEl.id = markerId;\r\n      markerEl.appendChild(doc.createTextNode(markerTextChar));\r\n      range.insertNode(markerEl);\r\n      sel.removeAllRanges();\r\n      sel.addRange(prevRange);\r\n      \r\n      let coordinates = {\r\n        left: 0,\r\n        top: markerEl.offsetHeight\r\n      };\r\n      \r\n      localToRelativeCoordinates(ctx, markerEl, coordinates);\r\n      \r\n      markerEl.parentNode.removeChild(markerEl);\r\n      return coordinates;\r\n    }\r\n    \r\n    function localToRelativeCoordinates(\r\n      ctx: { iframe: HTMLIFrameElement, parent?: Element },\r\n      element: Element,\r\n      coordinates: { top: number; left: number }\r\n      ) {\r\n        let obj = <HTMLElement>element;\r\n        let iframe = ctx ? ctx.iframe : null;\r\n        while (obj) {\r\n          if (ctx.parent != null && ctx.parent == obj) {\r\n            break;\r\n          }\r\n          coordinates.left += obj.offsetLeft + obj.clientLeft;\r\n          coordinates.top += obj.offsetTop + obj.clientTop;\r\n          obj = <HTMLElement>obj.offsetParent;\r\n          if (!obj && iframe) {\r\n            obj = iframe;\r\n            iframe = null;\r\n          }\r\n        }\r\n        obj = <HTMLElement>element;\r\n        iframe = ctx ? ctx.iframe : null;\r\n        while (obj !== getDocument(null).body && obj != null) {\r\n          if (ctx.parent != null && ctx.parent == obj) {\r\n            break;\r\n          }\r\n          if (obj.scrollTop && obj.scrollTop > 0) {\r\n            coordinates.top -= obj.scrollTop;\r\n          }\r\n          if (obj.scrollLeft && obj.scrollLeft > 0) {\r\n            coordinates.left -= obj.scrollLeft;\r\n          }\r\n          obj = <HTMLElement>obj.parentNode;\r\n          if (!obj && iframe) {\r\n            obj = iframe;\r\n            iframe = null;\r\n          }\r\n        }\r\n      }\r\n      ","/* From: https://github.com/component/textarea-caret-position */\r\n/* jshint browser: true */\r\n\r\n// (function () {\r\n\r\n  // We'll copy the properties below into the mirror div.\r\n  // Note that some browsers, such as Firefox, do not concatenate properties\r\n  // into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\r\n  // so we have to list every single property explicitly.\r\n  var properties = [\r\n    'direction',  // RTL support\r\n    'boxSizing',\r\n    'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\r\n    'height',\r\n    'overflowX',\r\n    'overflowY',  // copy the scrollbar for IE\r\n\r\n    'borderTopWidth',\r\n    'borderRightWidth',\r\n    'borderBottomWidth',\r\n    'borderLeftWidth',\r\n    'borderStyle',\r\n\r\n    'paddingTop',\r\n    'paddingRight',\r\n    'paddingBottom',\r\n    'paddingLeft',\r\n\r\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font\r\n    'fontStyle',\r\n    'fontVariant',\r\n    'fontWeight',\r\n    'fontStretch',\r\n    'fontSize',\r\n    'fontSizeAdjust',\r\n    'lineHeight',\r\n    'fontFamily',\r\n\r\n    'textAlign',\r\n    'textTransform',\r\n    'textIndent',\r\n    'textDecoration',  // might not make a difference, but better be safe\r\n\r\n    'letterSpacing',\r\n    'wordSpacing',\r\n\r\n    'tabSize',\r\n    'MozTabSize'\r\n\r\n  ];\r\n\r\n  var isBrowser = (typeof window !== 'undefined');\r\n  var isFirefox = (isBrowser && window['mozInnerScreenX'] != null);\r\n\r\n  export function getCaretCoordinates(element, position, options) {\r\n    if (!isBrowser) {\r\n      throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\r\n    }\r\n\r\n    var debug = options && options.debug || false;\r\n    if (debug) {\r\n      var el = document.querySelector('#input-textarea-caret-position-mirror-div');\r\n      if (el) el.parentNode.removeChild(el);\r\n    }\r\n\r\n    // The mirror div will replicate the textarea's style\r\n    var div = document.createElement('div');\r\n    div.id = 'input-textarea-caret-position-mirror-div';\r\n    document.body.appendChild(div);\r\n\r\n    var style = div.style;\r\n    var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\r\n    var isInput = element.nodeName === 'INPUT';\r\n\r\n    // Default textarea styles\r\n    style.whiteSpace = 'pre-wrap';\r\n    if (!isInput)\r\n      style.wordWrap = 'break-word';  // only for textarea-s\r\n\r\n    // Position off-screen\r\n    style.position = 'absolute';  // required to return coordinates properly\r\n    if (!debug)\r\n      style.visibility = 'hidden';  // not 'display: none' because we want rendering\r\n\r\n    // Transfer the element's properties to the div\r\n    properties.forEach(function (prop) {\r\n      if (isInput && prop === 'lineHeight') {\r\n        // Special case for <input>s because text is rendered centered and line height may be != height\r\n        if (computed.boxSizing === \"border-box\") {\r\n          var height = parseInt(computed.height);\r\n          var outerHeight =\r\n            parseInt(computed.paddingTop) +\r\n            parseInt(computed.paddingBottom) +\r\n            parseInt(computed.borderTopWidth) +\r\n            parseInt(computed.borderBottomWidth);\r\n          var targetHeight = outerHeight + parseInt(computed.lineHeight);\r\n          if (height > targetHeight) {\r\n            style.lineHeight = height - outerHeight + \"px\";\r\n          } else if (height === targetHeight) {\r\n            style.lineHeight = computed.lineHeight;\r\n          } else {\r\n            style.lineHeight = '0';\r\n          }\r\n        } else {\r\n          style.lineHeight = computed.height;\r\n        }\r\n      } else {\r\n        style[prop] = computed[prop];\r\n      }\r\n    });\r\n\r\n    if (isFirefox) {\r\n      // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\r\n      if (element.scrollHeight > parseInt(computed.height))\r\n        style.overflowY = 'scroll';\r\n    } else {\r\n      style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\r\n    }\r\n\r\n    div.textContent = element.value.substring(0, position);\r\n    // The second special handling for input type=\"text\" vs textarea:\r\n    // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\r\n    if (isInput)\r\n      div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\r\n\r\n    var span = document.createElement('span');\r\n    // Wrapping must be replicated *exactly*, including when a long word gets\r\n    // onto the next line, with whitespace at the end of the line before (#7).\r\n    // The  *only* reliable way to do that is to copy the *entire* rest of the\r\n    // textarea's content into the <span> created at the caret position.\r\n    // For inputs, just '.' would be enough, but no need to bother.\r\n    span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\r\n    div.appendChild(span);\r\n\r\n    var coordinates = {\r\n      top: span.offsetTop + parseInt(computed['borderTopWidth']),\r\n      left: span.offsetLeft + parseInt(computed['borderLeftWidth']),\r\n      height: parseInt(computed['lineHeight'])\r\n    };\r\n\r\n    if (debug) {\r\n      span.style.backgroundColor = '#aaa';\r\n    } else {\r\n      document.body.removeChild(div);\r\n    }\r\n\r\n    return coordinates;\r\n  }\r\n\r\n  // if (typeof module != 'undefined' && typeof module.exports != 'undefined') {\r\n  //   module.exports = getCaretCoordinates;\r\n  // } else if(isBrowser) {\r\n  //   window.getCaretCoordinates = getCaretCoordinates;\r\n  // }\r\n\r\n  // }());","import {\r\n  Component, ElementRef, Output, EventEmitter, ViewChild, Input, TemplateRef, AfterContentChecked\r\n} from '@angular/core';\r\n\r\nimport { isInputOrTextAreaElement, getContentEditableCaretCoords } from './mention-utils';\r\nimport { getCaretCoordinates } from './caret-coords';\r\n\r\n/**\r\n * Angular Mentions.\r\n * https://github.com/dmacfarlane/angular-mentions\r\n *\r\n * Copyright (c) 2016 Dan MacFarlane\r\n */\r\n@Component({\r\n  selector: 'mention-list',\r\n  styleUrls: ['./mention-list.component.scss'],\r\n  template: `\r\n    <ng-template #defaultItemTemplate let-item=\"item\">\r\n      {{item[labelKey]}}\r\n    </ng-template>\r\n    <ul #list [hidden]=\"hidden\" class=\"dropdown-menu scrollable-menu\"\r\n      [class.mention-menu]=\"!styleOff\" [class.mention-dropdown]=\"!styleOff && dropUp\">\r\n      <li *ngFor=\"let item of items; let i = index\"\r\n        [class.active]=\"activeIndex==i\" [class.mention-active]=\"!styleOff && activeIndex==i\">\r\n        <a class=\"dropdown-item\" [class.mention-item]=\"!styleOff\"\r\n          (mousedown)=\"activeIndex=i;itemClick.emit();$event.preventDefault()\">\r\n          <ng-template [ngTemplateOutlet]=\"itemTemplate\" [ngTemplateOutletContext]=\"{'item':item}\"></ng-template>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    `\r\n})\r\nexport class MentionListComponent implements AfterContentChecked {\r\n  @Input() labelKey: string = 'label';\r\n  @Input() itemTemplate: TemplateRef<any>;\r\n  @Output() itemClick = new EventEmitter();\r\n  @ViewChild('list', { static: true }) list: ElementRef;\r\n  @ViewChild('defaultItemTemplate', { static: true }) defaultItemTemplate: TemplateRef<any>;\r\n  items = [];\r\n  activeIndex: number = 0;\r\n  hidden: boolean = false;\r\n  dropUp: boolean = false;\r\n  styleOff: boolean = false;\r\n  private coords: {top:number, left:number} = {top:0, left:0};\r\n  private offset: number = 0;\r\n  constructor(private element: ElementRef) {}\r\n\r\n  ngAfterContentChecked() {\r\n    if (!this.itemTemplate) {\r\n      this.itemTemplate = this.defaultItemTemplate;\r\n    }\r\n  }\r\n\r\n  // lots of confusion here between relative coordinates and containers\r\n  position(nativeParentElement: HTMLInputElement, iframe: HTMLIFrameElement = null) {\r\n    if (isInputOrTextAreaElement(nativeParentElement)) {\r\n      // parent elements need to have postition:relative for this to work correctly?\r\n      this.coords = getCaretCoordinates(nativeParentElement, nativeParentElement.selectionStart, null);\r\n      this.coords.top = nativeParentElement.offsetTop + this.coords.top - nativeParentElement.scrollTop;\r\n      this.coords.left = nativeParentElement.offsetLeft + this.coords.left - nativeParentElement.scrollLeft;\r\n      // getCretCoordinates() for text/input elements needs an additional offset to position the list correctly\r\n      this.offset = this.getBlockCursorDimensions(nativeParentElement).height;\r\n    }\r\n    else if (iframe) {\r\n      let context: { iframe: HTMLIFrameElement, parent: Element } = { iframe: iframe, parent: iframe.offsetParent };\r\n      this.coords = getContentEditableCaretCoords(context);\r\n    }\r\n    else {\r\n      let doc = document.documentElement;\r\n      let scrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\r\n      let scrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\r\n      // bounding rectangles are relative to view, offsets are relative to container?\r\n      let caretRelativeToView = getContentEditableCaretCoords({ iframe: iframe });\r\n      let parentRelativeToContainer: ClientRect = nativeParentElement.getBoundingClientRect();\r\n      this.coords.top = caretRelativeToView.top - parentRelativeToContainer.top + nativeParentElement.offsetTop - scrollTop;\r\n      this.coords.left = caretRelativeToView.left - parentRelativeToContainer.left + nativeParentElement.offsetLeft - scrollLeft;\r\n    }\r\n    // set the default/inital position\r\n    this.positionElement();\r\n  }\r\n\r\n  get activeItem() {\r\n    return this.items[this.activeIndex];\r\n  }\r\n\r\n  activateNextItem() {\r\n    // adjust scrollable-menu offset if the next item is out of view\r\n    let listEl: HTMLElement = this.list.nativeElement;\r\n    let activeEl = listEl.getElementsByClassName('active').item(0);\r\n    if (activeEl) {\r\n      let nextLiEl: HTMLElement = <HTMLElement> activeEl.nextSibling;\r\n      if (nextLiEl && nextLiEl.nodeName == \"LI\") {\r\n        let nextLiRect: ClientRect = nextLiEl.getBoundingClientRect();\r\n        if (nextLiRect.bottom > listEl.getBoundingClientRect().bottom) {\r\n          listEl.scrollTop = nextLiEl.offsetTop + nextLiRect.height - listEl.clientHeight;\r\n        }\r\n      }\r\n    }\r\n    // select the next item\r\n    this.activeIndex = Math.max(Math.min(this.activeIndex + 1, this.items.length - 1), 0);\r\n  }\r\n\r\n  activatePreviousItem() {\r\n    // adjust the scrollable-menu offset if the previous item is out of view\r\n    let listEl: HTMLElement = this.list.nativeElement;\r\n    let activeEl = listEl.getElementsByClassName('active').item(0);\r\n    if (activeEl) {\r\n      let prevLiEl: HTMLElement = <HTMLElement> activeEl.previousSibling;\r\n      if (prevLiEl && prevLiEl.nodeName == \"LI\") {\r\n        let prevLiRect: ClientRect = prevLiEl.getBoundingClientRect();\r\n        if (prevLiRect.top < listEl.getBoundingClientRect().top) {\r\n          listEl.scrollTop = prevLiEl.offsetTop;\r\n        }\r\n      }\r\n    }\r\n    // select the previous item\r\n    this.activeIndex = Math.max(Math.min(this.activeIndex - 1, this.items.length - 1), 0);\r\n  }\r\n\r\n  // reset for a new mention search\r\n  reset() {\r\n    this.list.nativeElement.scrollTop = 0;\r\n    this.checkBounds();\r\n  }\r\n\r\n  // final positioning is done after the list is shown (and the height and width are known)\r\n  // ensure it's in the page bounds\r\n  private checkBounds() {\r\n    let left = this.coords.left, top = this.coords.top, dropUp = this.dropUp;\r\n    const bounds: ClientRect = this.list.nativeElement.getBoundingClientRect();\r\n    // if off right of page, align right\r\n    if (bounds.left + bounds.width > window.innerWidth) {\r\n      left -= bounds.left + bounds.width - window.innerWidth + 10;\r\n    }\r\n    // if more than half off the bottom of the page, force dropUp\r\n    // if ((bounds.top+bounds.height/2)>window.innerHeight) {\r\n    //   dropUp = true;\r\n    // }\r\n    // if top is off page, disable dropUp\r\n    if (bounds.top<0) {\r\n      dropUp = false;\r\n    }\r\n    // set the revised/final position\r\n    this.positionElement(left, top, dropUp);\r\n  }\r\n\r\n  private positionElement(left:number=this.coords.left, top:number=this.coords.top, dropUp:boolean=this.dropUp) {\r\n    \r\n    const el: HTMLElement = this.element.nativeElement;\r\n    top += dropUp ? 0 : this.offset; // top of list is next line\r\n    el.className = dropUp ? 'dropup' : null;\r\n    el.style.position = \"absolute\";\r\n    el.style.left = left + 'px';\r\n    el.style.top = top + 'px';\r\n  }\r\n\r\n  private getBlockCursorDimensions(nativeParentElement: HTMLInputElement) {\r\n    const parentStyles = window.getComputedStyle(nativeParentElement);\r\n    return {\r\n      height: parseFloat(parentStyles.lineHeight),\r\n      width: parseFloat(parentStyles.fontSize)\r\n    };\r\n  }\r\n}\r\n","import { ComponentFactoryResolver, Directive, ElementRef, TemplateRef, ViewContainerRef } from \"@angular/core\";\r\nimport { EventEmitter, Input, OnChanges, Output, SimpleChanges } from \"@angular/core\";\r\nimport { getCaretPosition, getValue, insertValue, setCaretPosition } from './mention-utils';\r\n\r\nimport { MentionConfig } from \"./mention-config\";\r\nimport { MentionListComponent } from './mention-list.component';\r\n\r\nconst KEY_BACKSPACE = 8;\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_SHIFT = 16;\r\nconst KEY_ESCAPE = 27;\r\nconst KEY_SPACE = 32;\r\nconst KEY_LEFT = 37;\r\nconst KEY_UP = 38;\r\nconst KEY_RIGHT = 39;\r\nconst KEY_DOWN = 40;\r\nconst KEY_BUFFERED = 229;\r\n\r\n/**\r\n* Angular Mentions.\r\n* https://github.com/dmacfarlane/angular-mentions\r\n*\r\n* Copyright (c) 2017 Dan MacFarlane\r\n*/\r\n@Directive({\r\n  selector: '[mention], [mentionConfig]',\r\n  host: {\r\n    '(keydown)': 'keyHandler($event)',\r\n    '(input)': 'inputHandler($event)',\r\n    '(blur)': 'blurHandler($event)',\r\n    'autocomplete': 'off'\r\n  }\r\n})\r\nexport class MentionDirective implements OnChanges {\r\n  \r\n  // stores the items passed to the mentions directive and used to populate the root items in mentionConfig\r\n  private mentionItems: any[];\r\n  \r\n  @Input('mention') set mention(items: any[]) {\r\n    this.mentionItems = items;\r\n  }\r\n  \r\n  // the provided configuration object\r\n  @Input() mentionConfig: MentionConfig = { items: [] };\r\n  \r\n  private activeConfig: MentionConfig;\r\n  \r\n  private DEFAULT_CONFIG: MentionConfig = {\r\n    items: [],\r\n    triggerChar: '@',\r\n    labelKey: 'label',\r\n    maxItems: -1,\r\n    allowSpace: false,\r\n    returnTrigger: true,\r\n    insertHTML: true,\r\n    mentionSelect: (item: any, triggerChar?:string) => this.activeConfig.triggerChar + item[this.activeConfig.labelKey]\r\n  }\r\n  \r\n  // template to use for rendering list items\r\n  @Input() mentionListTemplate: TemplateRef<any>;\r\n  \r\n  // event emitted whenever the search term changes\r\n  @Output() searchTerm = new EventEmitter<string>();\r\n  \r\n  // event emitted when an item is selected\r\n  @Output() itemSelected = new EventEmitter<any>();\r\n  \r\n  // event emitted whenever the mention list is opened or closed\r\n  @Output() opened = new EventEmitter();\r\n  @Output() closed = new EventEmitter();\r\n  \r\n  private triggerChars: { [key: string]: MentionConfig } = {};\r\n  \r\n  private searchString: string;\r\n  private startPos: number;\r\n  private startNode;\r\n  private searchList: MentionListComponent;\r\n  private searching: boolean;\r\n  private iframe: any; // optional\r\n  private lastKeyCode: number;\r\n  \r\n  constructor(\r\n    private _element: ElementRef,\r\n    private _componentResolver: ComponentFactoryResolver,\r\n    private _viewContainerRef: ViewContainerRef\r\n    ) { }\r\n    \r\n    ngOnChanges(changes: SimpleChanges) {\r\n      // console.log('config change', changes);\r\n      if (changes['mention'] || changes['mentionConfig']) {\r\n        this.updateConfig();\r\n      }\r\n    }\r\n    \r\n    public updateConfig() {\r\n      let config = this.mentionConfig;\r\n      this.triggerChars = {};\r\n      // use items from directive if they have been set\r\n      if (this.mentionItems) {\r\n        config.items = this.mentionItems;\r\n      }\r\n      this.addConfig(config);\r\n      // nested configs\r\n      if (config.mentions) {\r\n        config.mentions.forEach(config => this.addConfig(config));\r\n      }\r\n    }\r\n    \r\n    // add configuration for a trigger char\r\n    private addConfig(config: MentionConfig) {\r\n      // defaults\r\n      let defaults = Object.assign({}, this.DEFAULT_CONFIG);\r\n      config = Object.assign(defaults, config);\r\n      // items\r\n      let items = config.items;\r\n      if (items && items.length > 0) {\r\n        // convert strings to objects\r\n        if (typeof items[0] == 'string') {\r\n          items = items.map((label) => {\r\n            let object = {};\r\n            object[config.labelKey] = label;\r\n            return object;\r\n          });\r\n        }\r\n        if (config.labelKey) {\r\n          // remove items without an labelKey (as it's required to filter the list)\r\n          items = items.filter(e => e[config.labelKey]);\r\n          if (!config.disableSort) {\r\n            items.sort((a, b) => a[config.labelKey].localeCompare(b[config.labelKey]));\r\n          }\r\n        }\r\n      }\r\n      config.items = items;\r\n      \r\n      // add the config\r\n      this.triggerChars[config.triggerChar] = config;\r\n      \r\n      // for async update while menu/search is active\r\n      if (this.activeConfig && this.activeConfig.triggerChar == config.triggerChar) {\r\n        this.activeConfig = config;\r\n        this.updateSearchList();\r\n      }\r\n    }\r\n    \r\n    setIframe(iframe: HTMLIFrameElement) {\r\n      this.iframe = iframe;\r\n    }\r\n    \r\n    stopEvent(event: any) {\r\n      //if (event instanceof KeyboardEvent) { // does not work for iframe\r\n      \r\n      if (!event.wasClick) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        event.stopImmediatePropagation();\r\n        //return false;\r\n      }\r\n    }\r\n    \r\n    blurHandler(event: any) {\r\n      this.stopEvent(event);\r\n      this.stopSearch();\r\n    }\r\n    \r\n    inputHandler(event: any, nativeElement: HTMLInputElement = this._element.nativeElement) {\r\n      if (this.lastKeyCode === KEY_BUFFERED && event.data) {\r\n        let keyCode = event.data.charCodeAt(0);\r\n        this.keyHandler({ keyCode, inputEvent: true }, nativeElement);\r\n      }\r\n    }\r\n    \r\n    // @param nativeElement is the alternative text element in an iframe scenario\r\n    keyHandler(event: any, nativeElement: HTMLInputElement = this._element.nativeElement) {\r\n      this.lastKeyCode = event.keyCode;\r\n      \r\n      if (event.isComposing || event.keyCode === KEY_BUFFERED) {\r\n        return;\r\n      }\r\n      \r\n      let val: string = getValue(nativeElement);\r\n      //console.log(val);\r\n      let pos = getCaretPosition(nativeElement, this.iframe);\r\n      //pos = pos - 170;\r\n      //console.log('pos inicial:' + pos);\r\n      \r\n      let charPressed = event.key;\r\n      if (!charPressed) {\r\n        let charCode = event.which || event.keyCode;\r\n        if (!event.shiftKey && (charCode >= 65 && charCode <= 90)) {\r\n          charPressed = String.fromCharCode(charCode + 32);\r\n        }\r\n        // else if (event.shiftKey && charCode === KEY_2) {\r\n        //   charPressed = this.config.triggerChar;\r\n        // }\r\n        else {\r\n          // TODO (dmacfarlane) fix this for non-alpha keys\r\n          // http://stackoverflow.com/questions/2220196/how-to-decode-character-pressed-from-jquerys-keydowns-event-handler?lq=1\r\n          charPressed = String.fromCharCode(event.which || event.keyCode);\r\n        }\r\n      }\r\n      if (event.keyCode == KEY_ENTER && event.wasClick && pos < this.startPos) {\r\n        // put caret back in position prior to contenteditable menu click\r\n        pos = this.startNode.length;\r\n        setCaretPosition(this.startNode, pos, this.iframe);\r\n      }\r\n      //console.log(\"keyHandler\", this.startPos, pos, val, charPressed, event);\r\n      \r\n      let config = this.triggerChars[charPressed];\r\n      if (config) {\r\n        this.activeConfig = config;\r\n        this.startPos = event.inputEvent ? pos - 1 : pos;\r\n        this.startNode = (this.iframe ? this.iframe.contentWindow.getSelection() : window.getSelection()).anchorNode;\r\n        this.searching = true;\r\n        this.searchString = null;\r\n        this.showSearchList(nativeElement);\r\n        this.updateSearchList();\r\n        \r\n        if (config.returnTrigger) {\r\n          this.searchTerm.emit(config.triggerChar);\r\n        }\r\n        \r\n      }\r\n      else if (this.startPos >= 0 && this.searching) {\r\n        if (pos <= this.startPos) {\r\n          this.searchList.hidden = true;\r\n        }\r\n        // ignore shift when pressed alone, but not when used with another key\r\n        else if (event.keyCode !== KEY_SHIFT &&\r\n          !event.metaKey &&\r\n          !event.altKey &&\r\n          !event.ctrlKey &&\r\n          pos > this.startPos\r\n          ) {\r\n            if (!this.activeConfig.allowSpace && event.keyCode === KEY_SPACE) {\r\n              this.startPos = -1;\r\n            }\r\n            else if (event.keyCode === KEY_BACKSPACE && pos > 0) {\r\n              pos--;\r\n              if (pos == this.startPos) {\r\n                this.stopSearch();\r\n              }\r\n            }\r\n            else if (!this.searchList.hidden) {\r\n              \r\n              if (event.keyCode === KEY_TAB || event.keyCode === KEY_ENTER) {\r\n                \r\n                //issues with primeNG editor, when pressed ENTER\r\n                //this.stopEvent(event);\r\n                \r\n                if (event.keyCode === KEY_ENTER && !event.wasClick ) {\r\n                  if(pos - 170 > 0){\r\n                    pos = pos - 170;\r\n                    this.startPos = this.startPos - 170;\r\n                  }\r\n                }\r\n                \r\n                //console.log('evento stopped ' + event.keyCode);\r\n                // emit the selected list item\r\n                this.itemSelected.emit(this.searchList.activeItem);\r\n                // optional function to format the selected item before inserting the text\r\n                const text = this.activeConfig.mentionSelect(this.searchList.activeItem, this.activeConfig.triggerChar);\r\n                //console.log(text);\r\n                //console.log(nativeElement);\r\n                //console.log(this.startPos);\r\n                //console.log(pos);\r\n                // value is inserted without a trailing space for consistency\r\n                // between element types (div and iframe do not preserve the space)\r\n                insertValue(nativeElement, this.startPos, pos, this.activeConfig.insertHTML, text, this.iframe);\r\n                // fire input event so angular bindings are updated\r\n                if (\"createEvent\" in document) {\r\n                  let evt = document.createEvent(\"HTMLEvents\");\r\n                  if (this.iframe) {\r\n                    // a 'change' event is required to trigger tinymce updates\r\n                    evt.initEvent(\"change\", true, false);\r\n                  }\r\n                  else {\r\n                    evt.initEvent(\"input\", true, false);\r\n                  }\r\n                  // this seems backwards, but fire the event from this elements nativeElement (not the\r\n                  // one provided that may be in an iframe, as it won't be propogate)\r\n                  this._element.nativeElement.dispatchEvent(evt);\r\n                }\r\n                this.startPos = -1;\r\n                this.stopSearch();\r\n                return false;\r\n              }\r\n              else if (event.keyCode === KEY_ESCAPE) {\r\n                this.stopEvent(event);\r\n                this.stopSearch();\r\n                return false;\r\n              }\r\n              else if (event.keyCode === KEY_DOWN) {\r\n                this.stopEvent(event);\r\n                this.searchList.activateNextItem();\r\n                return false;\r\n              }\r\n              else if (event.keyCode === KEY_UP) {\r\n                this.stopEvent(event);\r\n                this.searchList.activatePreviousItem();\r\n                return false;\r\n              }\r\n            }\r\n            \r\n            if (charPressed.length!=1 && event.keyCode!=KEY_BACKSPACE) {\r\n              this.stopEvent(event);\r\n              return false;\r\n            }\r\n            else if (this.searching) {\r\n              let mention = val.substring(this.startPos + 1, pos);\r\n              if (event.keyCode !== KEY_BACKSPACE && !event.inputEvent) {\r\n                mention += charPressed;\r\n              }\r\n              this.searchString = mention;\r\n              if (this.activeConfig.returnTrigger) {\r\n                const triggerChar = (this.searchString || event.keyCode === KEY_BACKSPACE) ? val.substring(this.startPos, this.startPos + 1) : '';\r\n                this.searchTerm.emit(triggerChar + this.searchString);\r\n              } \r\n              else {\r\n                this.searchTerm.emit(this.searchString);\r\n              }\r\n              this.updateSearchList();\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      // exposed for external calls to open the mention list, e.g. by clicking a button\r\n      public startSearch(triggerChar?: string, nativeElement: HTMLInputElement = this._element.nativeElement) {\r\n        triggerChar = triggerChar || this.mentionConfig.triggerChar || this.DEFAULT_CONFIG.triggerChar;\r\n        const pos = getCaretPosition(nativeElement, this.iframe);\r\n        insertValue(nativeElement, pos, pos, this.activeConfig.insertHTML, triggerChar, this.iframe);\r\n        this.keyHandler({ key: triggerChar, inputEvent: true }, nativeElement);\r\n      }\r\n      \r\n      stopSearch() {\r\n        if (this.searchList && !this.searchList.hidden) {\r\n          this.searchList.hidden = true;\r\n          this.closed.emit();\r\n        }\r\n        this.activeConfig = null;\r\n        this.searching = false;\r\n      }\r\n      \r\n      updateSearchList() {\r\n        let matches: any[] = [];\r\n        if (this.activeConfig && this.activeConfig.items) {\r\n          let objects = this.activeConfig.items;\r\n          // disabling the search relies on the async operation to do the filtering\r\n          if (!this.activeConfig.disableSearch && this.searchString && this.activeConfig.labelKey) {\r\n            let searchStringLowerCase = this.searchString.toLowerCase();\r\n            objects = objects.filter(e => e[this.activeConfig.labelKey].toLowerCase().startsWith(searchStringLowerCase));\r\n          }\r\n          matches = objects;\r\n          if (this.activeConfig.maxItems > 0) {\r\n            matches = matches.slice(0, this.activeConfig.maxItems);\r\n          }\r\n        }\r\n        // update the search list\r\n        if (this.searchList) {\r\n          this.searchList.items = matches;\r\n          this.searchList.hidden = matches.length == 0;\r\n        }\r\n      }\r\n      \r\n      showSearchList(nativeElement: HTMLInputElement) {\r\n        this.opened.emit();\r\n        \r\n        if (this.searchList == null) {\r\n          let componentFactory = this._componentResolver.resolveComponentFactory(MentionListComponent);\r\n          let componentRef = this._viewContainerRef.createComponent(componentFactory);\r\n          this.searchList = componentRef.instance;\r\n          this.searchList.itemTemplate = this.mentionListTemplate;\r\n          \r\n          componentRef.instance['itemClick'].subscribe(() => {\r\n            nativeElement.focus();\r\n            let fakeKeydown = { key: 'Enter', keyCode: KEY_ENTER, wasClick: true };\r\n            this.keyHandler(fakeKeydown, nativeElement);\r\n          });\r\n        }\r\n        this.searchList.labelKey = this.activeConfig.labelKey;\r\n        this.searchList.dropUp = this.activeConfig.dropUp;\r\n        this.searchList.styleOff = this.mentionConfig.disableStyle;\r\n        this.searchList.activeIndex = 0;\r\n        this.searchList.position(nativeElement, this.iframe);\r\n        window.requestAnimationFrame(() => this.searchList.reset());\r\n      }\r\n    }\r\n    ","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MentionDirective } from './mention.directive';\r\nimport { MentionListComponent } from './mention-list.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MentionDirective,\r\n    MentionListComponent\r\n  ],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [\r\n    MentionDirective\r\n  ],\r\n  entryComponents: [\r\n    MentionListComponent\r\n  ]\r\n})\r\nexport class MentionModule { }\r\n","/*\r\n * Public API Surface of angular-mentions\r\n */\r\n\r\nexport * from './lib/mention-config';\r\nexport * from './lib/mention.directive';\r\nexport * from './lib/mention.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {MentionListComponent as ɵa} from './lib/mention-list.component';"],"names":["tslib_1.__decorate"],"mappings":"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"}