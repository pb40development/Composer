const a15_0x4c1c=['self','build','find','addTaskToGraph','TaskGraphCreator','length','../../../utilities/nx-imports','dependencies','strictlyOrderedTargets','createTaskGraphCompat','projects','/nx.json','__esModule','addTaskDependencies','tasks','strip-json-comments','addDependencies','readFileSync','push','defaultTargetDependencies','project','roots','add','target','keys','../../../utilities/nx-imports-light','targetDependencies','defineProperty','filter','createTaskGraph','has','findTask','parse'];(function(_0x5b8cc4,_0x4c1c59){const _0x5f464c=function(_0x25de1f){while(--_0x25de1f){_0x5b8cc4['push'](_0x5b8cc4['shift']());}};_0x5f464c(++_0x4c1c59);}(a15_0x4c1c,0x1e4));const a15_0x5f46=function(_0x5b8cc4,_0x4c1c59){_0x5b8cc4=_0x5b8cc4-0x0;let _0x5f464c=a15_0x4c1c[_0x5b8cc4];return _0x5f464c;};'use strict';Object[a15_0x5f46('0x5')](exports,a15_0x5f46('0x17'),{'value':!![]});exports[a15_0x5f46('0xf')]=exports[a15_0x5f46('0x14')]=void 0x0;const fs_1=require('fs');const stripJsonComments=require(a15_0x5f46('0x1a'));const {workspaceRoot}=require(a15_0x5f46('0x3'));const {getDependencyConfigs}=require(a15_0x5f46('0x11'));function createTaskGraphCompat(_0x1035c8,_0x480de4,_0xd5a75a){const _0x2fb907=JSON[a15_0x5f46('0xa')](stripJsonComments((0x0,fs_1[a15_0x5f46('0x1c')])(workspaceRoot+a15_0x5f46('0x16'))['toString']()));return new TaskGraphCreator(_0x480de4,getDefaultDependencyConfigs(_0x2fb907,_0x1035c8))['createTaskGraph'](_0xd5a75a);}exports[a15_0x5f46('0x14')]=createTaskGraphCompat;function getDefaultDependencyConfigs(_0x3285b2,_0x56be4e){var _0x204f62,_0x2b25cb;const _0x318ab1=(_0x204f62=_0x3285b2[a15_0x5f46('0x4')])!==null&&_0x204f62!==void 0x0?_0x204f62:{};const _0x5c2403=_0x56be4e?(_0x2b25cb=_0x56be4e[a15_0x5f46('0x13')])!==null&&_0x2b25cb!==void 0x0?_0x2b25cb:[a15_0x5f46('0xc')]:[];for(const _0x31937e of _0x5c2403){_0x318ab1[_0x31937e]=_0x318ab1[_0x31937e]||[];_0x318ab1[_0x31937e][a15_0x5f46('0x1d')]({'target':_0x31937e,'projects':a15_0x5f46('0x12')});}return _0x318ab1;}class TaskGraphCreator{constructor(_0x13ab94,_0xf9ec7f){this['projectGraph']=_0x13ab94;this[a15_0x5f46('0x1e')]=_0xf9ec7f;}[a15_0x5f46('0x7')](_0x345bf2){const _0x456b07={'roots':[],'tasks':{},'dependencies':{}};for(const _0x567118 of _0x345bf2){this[a15_0x5f46('0xe')](_0x567118,_0x456b07);const _0x1be59c=getDependencyConfigs(_0x567118[a15_0x5f46('0x1')],this[a15_0x5f46('0x1e')],this['projectGraph']);if(!_0x1be59c){continue;}this[a15_0x5f46('0x18')](_0x567118,_0x1be59c,_0x345bf2,_0x456b07);}_0x456b07[a15_0x5f46('0x20')]=Object[a15_0x5f46('0x2')](_0x456b07[a15_0x5f46('0x12')])[a15_0x5f46('0x6')](_0x221fce=>_0x456b07[a15_0x5f46('0x12')][_0x221fce][a15_0x5f46('0x10')]===0x0);return _0x456b07;}[a15_0x5f46('0x18')](_0xe824a3,_0x4ef55e,_0x4464c9,_0x3fe368){for(const _0x2711f7 of _0x4ef55e){if(_0x2711f7[a15_0x5f46('0x15')]===a15_0x5f46('0xb')){for(const _0x9f0d46 of _0x4464c9){if(_0x9f0d46[a15_0x5f46('0x1')][a15_0x5f46('0x1f')]===_0xe824a3['target']['project']&&_0x9f0d46[a15_0x5f46('0x1')][a15_0x5f46('0x1')]===_0x2711f7[a15_0x5f46('0x1')]){_0x3fe368[a15_0x5f46('0x12')][_0xe824a3['id']]['push'](_0x9f0d46['id']);}}}else if(_0x2711f7[a15_0x5f46('0x15')]===a15_0x5f46('0x12')){const _0x23d567=new Set();this['addDependencies'](_0xe824a3[a15_0x5f46('0x1')][a15_0x5f46('0x1f')],_0x2711f7[a15_0x5f46('0x1')],_0x4464c9,_0x3fe368,_0xe824a3['id'],_0x23d567);}}}[a15_0x5f46('0x1b')](_0x43ab61,_0xc48a77,_0x178f64,_0x2413f2,_0x1e0bb2,_0x4454c5){_0x4454c5[a15_0x5f46('0x0')](_0x43ab61);const _0x11cf92=this['projectGraph'][a15_0x5f46('0x12')][_0x43ab61];if(_0x11cf92){const _0x4eb722=_0x11cf92['map'](_0x153a22=>_0x153a22[a15_0x5f46('0x1')]);for(const _0x157abd of _0x4eb722){if(_0x4454c5[a15_0x5f46('0x8')](_0x157abd)){continue;}const _0x132b9a=this[a15_0x5f46('0x9')]({'project':_0x157abd,'target':_0xc48a77},_0x178f64);if(_0x132b9a){if(_0x2413f2[a15_0x5f46('0x12')][_0x1e0bb2]['indexOf'](_0x132b9a['id'])===-0x1){_0x2413f2[a15_0x5f46('0x12')][_0x1e0bb2][a15_0x5f46('0x1d')](_0x132b9a['id']);}}else{this[a15_0x5f46('0x1b')](_0x157abd,_0xc48a77,_0x178f64,_0x2413f2,_0x1e0bb2,_0x4454c5);}}}}[a15_0x5f46('0x9')]({project,target},_0x205c74){return _0x205c74[a15_0x5f46('0xd')](_0x4f790e=>_0x4f790e[a15_0x5f46('0x1')]['project']===project&&_0x4f790e[a15_0x5f46('0x1')][a15_0x5f46('0x1')]===target);}[a15_0x5f46('0xe')](_0x194d2d,_0x4b19ae){_0x4b19ae[a15_0x5f46('0x19')][_0x194d2d['id']]=_0x194d2d;_0x4b19ae['dependencies'][_0x194d2d['id']]=[];}}exports['TaskGraphCreator']=TaskGraphCreator;