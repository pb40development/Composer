const a5_0x1890=['createApiAxiosInstance','apiAxiosInstance','tasks','DistributedAgentApi','axiosMultipleTries','branch','../../../utilities/axios','../../../utilities/environment','defineProperty','mapRespToPerfEntry','createMetricRecorder','axiosException','error','throw','post','/nx-cloud/executions/complete-run-group','next','data','done','VERBOSE_LOGGING','Completing\x20with\x20an\x20error','completeRunGroupWithError','error:\x20','agentName','ciExecutionId','runGroup:\x20','__esModule','ciExecutionId:\x20','value','../../../utilities/metric-logger','response','/nx-cloud/executions/tasks','runGroup','note','ciExecutionEnv:\x20','recordMetric','completeRunGroup','apply','RUNNER_FAILURE_PERF_ENTRY','ciExecutionEnv'];(function(_0x453e24,_0x189075){const _0x16a0f3=function(_0x5beeae){while(--_0x5beeae){_0x453e24['push'](_0x453e24['shift']());}};_0x16a0f3(++_0x189075);}(a5_0x1890,0x187));const a5_0x16a0=function(_0x453e24,_0x189075){_0x453e24=_0x453e24-0x0;let _0x16a0f3=a5_0x1890[_0x453e24];return _0x16a0f3;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x20a66a,_0x29d5e4,_0x590061,_0x321d58){function _0x37bfcc(_0x1fd3d3){return _0x1fd3d3 instanceof _0x590061?_0x1fd3d3:new _0x590061(function(_0xc4a773){_0xc4a773(_0x1fd3d3);});}return new(_0x590061||(_0x590061=Promise))(function(_0x483374,_0xa745a9){function _0x3adbeb(_0x52ee60){try{_0x173111(_0x321d58['next'](_0x52ee60));}catch(_0x2a1358){_0xa745a9(_0x2a1358);}}function _0x43aaf1(_0x3bd0cb){try{_0x173111(_0x321d58[a5_0x16a0('0x16')](_0x3bd0cb));}catch(_0x5de6a4){_0xa745a9(_0x5de6a4);}}function _0x173111(_0x246189){_0x246189[a5_0x16a0('0x1b')]?_0x483374(_0x246189[a5_0x16a0('0x25')]):_0x37bfcc(_0x246189[a5_0x16a0('0x25')])['then'](_0x3adbeb,_0x43aaf1);}_0x173111((_0x321d58=_0x321d58[a5_0x16a0('0x6')](_0x20a66a,_0x29d5e4||[]))[a5_0x16a0('0x19')]());});};Object[a5_0x16a0('0x11')](exports,a5_0x16a0('0x23'),{'value':!![]});exports[a5_0x16a0('0xc')]=void 0x0;const axios_1=require(a5_0x16a0('0xf'));const environment_1=require(a5_0x16a0('0x10'));const metric_logger_1=require(a5_0x16a0('0x26'));const {output}=require('../../../utilities/nx-imports-light');class DistributedAgentApi{constructor(_0x3a58c7,_0x1a1838,_0x23cab6,_0x58e4a0,_0x2dd3a4,_0x49e01a){this[a5_0x16a0('0xe')]=_0x1a1838;this['runGroup']=_0x23cab6;this[a5_0x16a0('0x21')]=_0x58e4a0;this[a5_0x16a0('0x8')]=_0x2dd3a4;this[a5_0x16a0('0x20')]=_0x49e01a;this['apiAxiosInstance']=(0x0,axios_1[a5_0x16a0('0x9')])(_0x3a58c7);}[a5_0x16a0('0xb')](_0x4ab42a,_0x46d566,_0x30f1bb,_0x6f11f2){return __awaiter(this,void 0x0,void 0x0,function*(){var _0x308d80;const _0x4b465f=(0x0,metric_logger_1['createMetricRecorder'])('dtePollTasks');try{const _0x457ecb=yield(0x0,axios_1[a5_0x16a0('0xd')])(()=>this[a5_0x16a0('0xa')]['post'](a5_0x16a0('0x0'),{'runGroup':this[a5_0x16a0('0x1')],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this[a5_0x16a0('0x8')],'agentName':this[a5_0x16a0('0x20')],'executionId':_0x4ab42a,'statusCode':_0x46d566,'completedTasks':_0x30f1bb,'targets':_0x6f11f2}));_0x4b465f['recordMetric']((0x0,metric_logger_1[a5_0x16a0('0x12')])(_0x457ecb));return _0x457ecb[a5_0x16a0('0x1a')];}catch(_0x15f7ad){_0x4b465f[a5_0x16a0('0x4')](((_0x308d80=_0x15f7ad===null||_0x15f7ad===void 0x0?void 0x0:_0x15f7ad[a5_0x16a0('0x14')])===null||_0x308d80===void 0x0?void 0x0:_0x308d80['response'])?(0x0,metric_logger_1[a5_0x16a0('0x12')])(_0x15f7ad['axiosException'][a5_0x16a0('0x27')]):metric_logger_1[a5_0x16a0('0x7')]);throw _0x15f7ad;}});}[a5_0x16a0('0x1e')](_0x4ee949){return __awaiter(this,void 0x0,void 0x0,function*(){var _0x43be37;if(environment_1[a5_0x16a0('0x1c')]){output[a5_0x16a0('0x2')]({'title':a5_0x16a0('0x1d'),'bodyLines':[a5_0x16a0('0x24')+this['ciExecutionId'],a5_0x16a0('0x3')+this[a5_0x16a0('0x8')],a5_0x16a0('0x22')+this[a5_0x16a0('0x1')],a5_0x16a0('0x1f')+_0x4ee949]});}const _0x5040ce=(0x0,metric_logger_1[a5_0x16a0('0x13')])(a5_0x16a0('0x5'));try{const _0x2eb223=yield(0x0,axios_1[a5_0x16a0('0xd')])(()=>this[a5_0x16a0('0xa')][a5_0x16a0('0x17')](a5_0x16a0('0x18'),{'branch':this[a5_0x16a0('0xe')],'runGroup':this[a5_0x16a0('0x1')],'ciExecutionId':this[a5_0x16a0('0x21')],'ciExecutionEnv':this[a5_0x16a0('0x8')],'agentName':this[a5_0x16a0('0x20')],'criticalErrorMessage':_0x4ee949}));if(environment_1[a5_0x16a0('0x1c')]){output[a5_0x16a0('0x2')]({'title':'Completed\x20run\x20group\x20with\x20an\x20error'});}_0x5040ce[a5_0x16a0('0x4')]((0x0,metric_logger_1[a5_0x16a0('0x12')])(_0x2eb223));}catch(_0x581ecd){_0x5040ce['recordMetric'](((_0x43be37=_0x581ecd===null||_0x581ecd===void 0x0?void 0x0:_0x581ecd['axiosException'])===null||_0x43be37===void 0x0?void 0x0:_0x43be37[a5_0x16a0('0x27')])?(0x0,metric_logger_1[a5_0x16a0('0x12')])(_0x581ecd[a5_0x16a0('0x14')][a5_0x16a0('0x27')]):metric_logger_1[a5_0x16a0('0x7')]);console[a5_0x16a0('0x15')](_0x581ecd);}});}}exports['DistributedAgentApi']=DistributedAgentApi;