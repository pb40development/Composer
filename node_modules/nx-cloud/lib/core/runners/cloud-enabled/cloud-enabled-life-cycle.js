const a0_0x262f=['md5','digest','params','getTerminalOutput','updateStartedTask','toISOString','outputObfuscator','find','createHash','project','base64','hash','cache-miss','../../../utilities/serializer-overrides','scheduledTasks','taskId','startTime','../../terminal-output/read-task-terminal-output','update','code','status','hashDetails','endTime','cleanUpHashDetails','collectTerminalOutput','tasks','local-cache','keys','nodes','target','npm:','runContext','cache','CloudEnabledLifeCycle','readTaskTerminalOutput','sort','push','endCommand','remote-cache','crypto','cacheDirectory','startsWith','scheduleTask','__esModule','task','cacheableOperations','statuses'];(function(_0x140651,_0x262f72){const _0x1f6cb5=function(_0x5e23f5){while(--_0x5e23f5){_0x140651['push'](_0x140651['shift']());}};_0x1f6cb5(++_0x262f72);}(a0_0x262f,0xb8));const a0_0x1f6c=function(_0x140651,_0x262f72){_0x140651=_0x140651-0x0;let _0x1f6cb5=a0_0x262f[_0x140651];return _0x1f6cb5;};'use strict';Object['defineProperty'](exports,a0_0x1f6c('0x0'),{'value':!![]});exports[a0_0x1f6c('0x25')]=void 0x0;const crypto_1=require(a0_0x1f6c('0x2b'));const serializer_overrides_1=require(a0_0x1f6c('0x11'));const read_task_terminal_output_1=require(a0_0x1f6c('0x15'));class CloudEnabledLifeCycle{constructor(_0x154cba,_0x5aac9d,_0x40bbf0,_0x3cb2eb,_0x111bd1,_0x45a865){this[a0_0x1f6c('0x23')]=_0x154cba;this[a0_0x1f6c('0x2c')]=_0x5aac9d;this['collectTerminalOutput']=_0x40bbf0;this[a0_0x1f6c('0x2')]=_0x3cb2eb;this['outputObfuscator']=_0x111bd1;this[a0_0x1f6c('0x1d')]=_0x45a865;}[a0_0x1f6c('0x2e')](_0x43c9fc){this[a0_0x1f6c('0x23')][a0_0x1f6c('0x12')][a0_0x1f6c('0x28')](_0x43c9fc);}['startTask'](_0x20b201){this['tasks'][a0_0x1f6c('0x28')]({'taskId':_0x20b201['id'],'startTime':new Date()[a0_0x1f6c('0x9')](),'target':_0x20b201['target'][a0_0x1f6c('0x21')],'projectName':_0x20b201[a0_0x1f6c('0x21')][a0_0x1f6c('0xd')],'hash':_0x20b201[a0_0x1f6c('0xf')],'hashDetails':this['cleanUpHashDetails'](_0x20b201[a0_0x1f6c('0x19')]),'params':(0x0,serializer_overrides_1['serializeOverrides'])(_0x20b201),'uploadedToStorage':![]});}['endTasks'](_0x483b7e){for(let _0x1055ac of _0x483b7e){let _0x199fe7;const _0x2a7176=_0x1055ac[a0_0x1f6c('0x18')]===a0_0x1f6c('0x2a');const _0x4865df=_0x1055ac[a0_0x1f6c('0x18')]===a0_0x1f6c('0x24');const _0x13799f=_0x1055ac[a0_0x1f6c('0x18')]===a0_0x1f6c('0x1e')||_0x1055ac['status']==='local-cache-kept-existing'||_0x4865df;if(this[a0_0x1f6c('0x23')][a0_0x1f6c('0x3')][_0x1055ac[a0_0x1f6c('0x1')][a0_0x1f6c('0xf')]]){_0x199fe7=this[a0_0x1f6c('0x23')][a0_0x1f6c('0x3')][_0x1055ac[a0_0x1f6c('0x1')][a0_0x1f6c('0xf')]];}else if(_0x2a7176){_0x199fe7='remote-cache-hit';}else if(_0x13799f){_0x199fe7='local-cache-hit';}else{_0x199fe7=a0_0x1f6c('0x10');}this[a0_0x1f6c('0x8')](_0x1055ac,_0x199fe7);}}[a0_0x1f6c('0x29')](){}['updateStartedTask'](_0x19800,_0x571ca8){const _0x1f6ea0=this[a0_0x1f6c('0x1d')][a0_0x1f6c('0xb')](_0x24e703=>_0x24e703[a0_0x1f6c('0x13')]===_0x19800[a0_0x1f6c('0x1')]['id']);if(!_0x1f6ea0){throw new Error('Cannot\x20find\x20task\x20'+_0x19800['task']['id']);}if((_0x19800===null||_0x19800===void 0x0?void 0x0:_0x19800[a0_0x1f6c('0x14')])&&(_0x19800===null||_0x19800===void 0x0?void 0x0:_0x19800[a0_0x1f6c('0x1a')])){_0x1f6ea0[a0_0x1f6c('0x14')]=new Date(_0x19800['startTime'])[a0_0x1f6c('0x9')]();_0x1f6ea0['endTime']=new Date(_0x19800['endTime'])[a0_0x1f6c('0x9')]();}else{_0x1f6ea0[a0_0x1f6c('0x1a')]=new Date()['toISOString']();}_0x1f6ea0[a0_0x1f6c('0x18')]=_0x19800[a0_0x1f6c('0x17')];_0x1f6ea0[a0_0x1f6c('0x6')]=this[a0_0x1f6c('0xa')]['obfuscate'](_0x1f6ea0[a0_0x1f6c('0x6')]);_0x1f6ea0['cacheStatus']=_0x571ca8;if(this[a0_0x1f6c('0x1c')]){_0x1f6ea0['terminalOutput']=this[a0_0x1f6c('0x7')](_0x19800[a0_0x1f6c('0x1')][a0_0x1f6c('0xf')],_0x1f6ea0['cacheStatus'],_0x19800[a0_0x1f6c('0x17')]);}}[a0_0x1f6c('0x7')](_0x3c8b7,_0x2d30ae,_0x47f5c8){return(0x0,read_task_terminal_output_1[a0_0x1f6c('0x26')])(this[a0_0x1f6c('0x2c')],this[a0_0x1f6c('0xa')],_0x3c8b7,_0x2d30ae,_0x47f5c8);}[a0_0x1f6c('0x1b')](_0x13e368){const _0xb7a5d0={};const _0x2bec14=[];for(const _0x326f0e of Object[a0_0x1f6c('0x1f')](_0x13e368[a0_0x1f6c('0x20')])){if(_0x326f0e[a0_0x1f6c('0x2d')](a0_0x1f6c('0x22'))){_0x2bec14['push'](_0x13e368[a0_0x1f6c('0x20')][_0x326f0e]);}else{_0xb7a5d0[_0x326f0e]=_0x13e368[a0_0x1f6c('0x20')][_0x326f0e];}}_0x2bec14[a0_0x1f6c('0x27')]();if(_0x2bec14['length']>0x0){const _0x1e8f86=(0x0,crypto_1[a0_0x1f6c('0xc')])(a0_0x1f6c('0x4'));_0x1e8f86[a0_0x1f6c('0x16')](_0x2bec14['join']('|'));_0xb7a5d0['npmDependencies']=_0x1e8f86[a0_0x1f6c('0x5')](a0_0x1f6c('0xe'));}return{'nodes':_0xb7a5d0,'runtime':_0x13e368['runtime'],'implicitDeps':_0x13e368['implicitDeps']};}}exports[a0_0x1f6c('0x25')]=CloudEnabledLifeCycle;