const a2_0x5963=['fileStorage','map','put','../../../utilities/environment','Nx\x20Cloud:\x20Skipping\x20storing\x20','extractErrorMessage','Error\x20when\x20storing\x20artifacts','filter','statuses','delayedStoreRequests','done','waitForStoreRequestsToComplete','apply','api','defineProperty','startRun','value','retrieve','storeRequests','Nx\x20Cloud:\x20Cache\x20miss\x20','There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.','storage','requests','scheduledTasks','Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.','storeInCurrentProcess','hashUrls','next','then','distributedExecutionId','status','push','__awaiter','get','cache-miss','cacheError','all','CloudRemoteCache','hash','throw','resolve','.\x20Status\x20404.','messages','store','axiosException','VERBOSE_LOGGING','note','runContext'];(function(_0x213fb4,_0x59630e){const _0x1725ec=function(_0x3acb44){while(--_0x3acb44){_0x213fb4['push'](_0x213fb4['shift']());}};_0x1725ec(++_0x59630e);}(a2_0x5963,0xef));const a2_0x1725=function(_0x213fb4,_0x59630e){_0x213fb4=_0x213fb4-0x0;let _0x1725ec=a2_0x5963[_0x213fb4];return _0x1725ec;};'use strict';var __awaiter=this&&this[a2_0x1725('0x21')]||function(_0x5a60fe,_0x3f8509,_0x484d35,_0x59ce69){function _0x2d6fb8(_0xa0b73c){return _0xa0b73c instanceof _0x484d35?_0xa0b73c:new _0x484d35(function(_0x570db2){_0x570db2(_0xa0b73c);});}return new(_0x484d35||(_0x484d35=Promise))(function(_0x4c1de9,_0x2d6b7b){function _0x960005(_0x10b40b){try{_0x6d4da2(_0x59ce69[a2_0x1725('0x1c')](_0x10b40b));}catch(_0x227b2c){_0x2d6b7b(_0x227b2c);}}function _0x14fe1c(_0x30bf54){try{_0x6d4da2(_0x59ce69[a2_0x1725('0x28')](_0x30bf54));}catch(_0x2e740f){_0x2d6b7b(_0x2e740f);}}function _0x6d4da2(_0x4e4dfc){_0x4e4dfc[a2_0x1725('0xb')]?_0x4c1de9(_0x4e4dfc[a2_0x1725('0x11')]):_0x2d6fb8(_0x4e4dfc['value'])[a2_0x1725('0x1d')](_0x960005,_0x14fe1c);}_0x6d4da2((_0x59ce69=_0x59ce69[a2_0x1725('0xd')](_0x5a60fe,_0x3f8509||[]))[a2_0x1725('0x1c')]());});};Object[a2_0x1725('0xf')](exports,'__esModule',{'value':!![]});exports[a2_0x1725('0x26')]=void 0x0;const environment_1=require(a2_0x1725('0x4'));const {output}=require('../../../utilities/nx-imports-light');class CloudRemoteCache{constructor(_0x5240fe,_0x2399aa,_0x2d339b,_0xa89fc6,_0x4b4a52,_0x4d8f21){this[a2_0x1725('0x2b')]=_0x5240fe;this[a2_0x1725('0xe')]=_0x2399aa;this[a2_0x1725('0x0')]=_0x2d339b;this[a2_0x1725('0x1')]=_0xa89fc6;this[a2_0x1725('0x1e')]=_0x4b4a52;this[a2_0x1725('0x1a')]=_0x4d8f21;this['storeRequests']=[];this[a2_0x1725('0xa')]=[];}[a2_0x1725('0x12')](_0x27de0a,_0x394904){return __awaiter(this,void 0x0,void 0x0,function*(){var _0x30e8a9;if(this['messages']['cacheError'])return![];const _0x400c6e=yield this['hashUrls'](_0x27de0a);if(!_0x400c6e||!_0x400c6e[a2_0x1725('0x22')]){if(environment_1[a2_0x1725('0x2e')]){output[a2_0x1725('0x2f')]({'title':a2_0x1725('0x14')+_0x27de0a+'.'});}this[a2_0x1725('0x0')][a2_0x1725('0x9')][_0x27de0a]='cache-miss';return![];}try{yield this[a2_0x1725('0x1')][a2_0x1725('0x12')](_0x27de0a,_0x400c6e[a2_0x1725('0x22')],_0x394904);this[a2_0x1725('0x0')][a2_0x1725('0x9')][_0x27de0a]='remote-cache-hit';return!![];}catch(_0x225de6){const _0x9145d=(_0x30e8a9=_0x225de6[a2_0x1725('0x2d')])!==null&&_0x30e8a9!==void 0x0?_0x30e8a9:_0x225de6;if(_0x9145d['response']&&_0x9145d['response'][a2_0x1725('0x1f')]===0x194){if(environment_1['VERBOSE_LOGGING']){output[a2_0x1725('0x2f')]({'title':a2_0x1725('0x14')+_0x27de0a+a2_0x1725('0x2a')});}}else{this[a2_0x1725('0x2b')][a2_0x1725('0x24')]=this['messages']['extractErrorMessage'](_0x9145d,a2_0x1725('0x16'));}this[a2_0x1725('0x0')][a2_0x1725('0x9')][_0x27de0a]=a2_0x1725('0x23');return![];}});}[a2_0x1725('0x2c')](_0x3018a3,_0x286a78){return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x1725('0x24')])return![];const _0x57efc2=Promise[a2_0x1725('0x29')]()[a2_0x1725('0x1d')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x11fc5b;const _0x35798b=yield this[a2_0x1725('0x1b')](_0x3018a3);if(!_0x35798b)return![];if(!_0x35798b[a2_0x1725('0x3')]){if(environment_1[a2_0x1725('0x2e')]){output[a2_0x1725('0x2f')]({'title':a2_0x1725('0x5')+_0x3018a3+'.','bodyLines':[a2_0x1725('0x15'),a2_0x1725('0x19')]});}return!![];}if(!this[a2_0x1725('0x1a')]){this[a2_0x1725('0xa')][a2_0x1725('0x20')]({'hash':_0x3018a3,'url':_0x35798b['put']});return!![];}try{yield this[a2_0x1725('0x1')][a2_0x1725('0x2c')](_0x3018a3,_0x35798b['put'],_0x286a78);return!![];}catch(_0x35d72f){const _0x490d6c=(_0x11fc5b=_0x35d72f[a2_0x1725('0x2d')])!==null&&_0x11fc5b!==void 0x0?_0x11fc5b:_0x35d72f;this[a2_0x1725('0x2b')][a2_0x1725('0x24')]=this['messages'][a2_0x1725('0x6')](_0x490d6c,a2_0x1725('0x16'));return![];}}));this[a2_0x1725('0x13')][a2_0x1725('0x20')](_0x57efc2);return _0x57efc2;});}['hashUrls'](_0xa68944){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0xa68944 in this[a2_0x1725('0x0')][a2_0x1725('0x17')]){return(yield this[a2_0x1725('0x0')][a2_0x1725('0x17')][_0xa68944])[_0xa68944];}else{const _0x360fc3=this[a2_0x1725('0x0')][a2_0x1725('0x18')][a2_0x1725('0x8')](_0xdc1cc3=>!this[a2_0x1725('0x0')]['requests'][_0xdc1cc3['hash']])[a2_0x1725('0x2')](_0x7e103c=>_0x7e103c[a2_0x1725('0x27')]);if(_0x360fc3['indexOf'](_0xa68944)===-0x1){_0x360fc3[a2_0x1725('0x20')](_0xa68944);}const _0xaef652=this[a2_0x1725('0xe')][a2_0x1725('0x10')](this[a2_0x1725('0x1e')],_0x360fc3);_0x360fc3['forEach'](_0x5eb51d=>{this['runContext'][a2_0x1725('0x17')][_0x5eb51d]=_0xaef652;});return(yield _0xaef652)[_0xa68944];}});}[a2_0x1725('0xc')](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x42786e=yield Promise[a2_0x1725('0x25')](this[a2_0x1725('0x13')])['then'](_0x9c4624=>_0x9c4624['reduce']((_0x206d20,_0x3ef308)=>_0x206d20&&_0x3ef308,!![]));if(!_0x42786e){throw new Error(a2_0x1725('0x7'));}});}}exports['CloudRemoteCache']=CloudRemoteCache;